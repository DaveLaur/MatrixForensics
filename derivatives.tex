\chapter{Derivatives}

\section{Useful Rules for Derivatives}
For general $\mA$ and $\mX$ (no special structure):
\begin{align}
\partial\mA           &= 0~~\textrm{where $\mA$ is a constant} \\
\partial(c\mX)        &= c\partial\mX                          \\
\partial(\mX+\mY)     &= \partial\mX+\partial\mY               \\
\partial(\trace(\mX)) &= \trace(\partial(\mX))                 \\
\partial(\mX\mY)      &= (\partial\mX)\mY + \mX(\partial\mY)   \\
\partial(\mX\circ\mY) &= (\partial\mX)\circ\mY + \mX\circ(\partial\mY) \\
%TODO Kronecker x in circle equation 39 Matrix Cookbook
\partial(\mX^{-1})    &= -\mX^{-1}(\partial\mX)\mX^{-1}        \\
\partial(\det(\mX))   &= \trace(\textrm{adj}(\mX)\partial\mX)  \\
\partial(\det(\mX))   &= \det(\mX)\trace(\mX^{-1}\partial\mX)  \\
\partial(\ln(\det(\mX))) &= \trace(\mX^{-1}\partial\mX)        \\
\partial(\mX^T)       &= (\partial\mX)^T                       \\
\partial(\mX^H)       &= (\partial\mX)^H                       
\end{align}

\section{Derivatives of Matrices and Vectors}

\subsection{First-Order}

In the following, $\mJ$ is the Single-Entry Matrix (\autoref{sec:rogue_single_entry}).
\begin{align}
\pd{\vx^T \va}{\vx}     &= \pd{\va^T \vx}{\vx} = \va          \\
\pd{\va^T\mX\vb}{\mX}   &= \va\vb^T                           \\
\pd{\va^T\mX^T\vb}{\mX} &= \vb\va^T                           \\
\pd{\va^T\mX\va}{\mX}   &= \pd{\va^T\mX^T\va}{\mX} = \va\va^T \\
\pd{\mX}{\mX_{ij}}      &= \mJ^{ij}                              %TODO: What is this? (MCB 73)
%TODO: MCB 74, 75
\end{align}

\section{Derivatives of vector norms}

\begin{align}
\pd{}{\vx}\norm{\vx-\va}_2 &= \frac{\vx-\va}{\norm{\vx-\va}_2} \\
\pd{}{\vx}\frac{\vx-\va}{\norm{\vx-\va}_2} &= \frac{\mI}{\norm{\vx-\va}_2}-\frac{(\vx-\va)(\vx-\va)^T}{\norm{\vx-\va}_2^3} \\
\pd{\norm{\vx}_2^2}{\vx} &= \pd{\norm{\vx^T\vx}_2}{\vx} = 2\vx
\end{align}